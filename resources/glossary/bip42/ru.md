---
term: BIP42

---
Предложение по улучшению Bitcoin Core, устраняющее незначительную ошибку в графике уменьшения вознаграждения блока. Эта аномалия, если бы ее не исправили, привела бы к тому, что общее количество созданных биткоинов превысило бы запланированный лимит в 21 миллион. В частности, после окончания халвинга новый цикл создания биткоинов теоретически мог бы начаться примерно в 2214 году. Код Core, о котором идет речь, использовал операцию правого двоичного сдвига в значении вознаграждения майнера. Ошибка возникала из-за использования этой операции сдвига в контексте, где ее поведение было неопределенным в соответствии со стандартами языка C++. Сдвиг 64-битного целого числа (`int64_t`) более чем на 63 бита вправо попадает в эту категорию неопределенного поведения. В коде Bitcoin Core это могло произойти после 64 хэлвингов, на высоте блока № 13 440 000. За этим пределом поведение битового сдвига не было определено, а значит, разные компиляции могли интерпретировать код по-разному. Это могло привести к непредсказуемым последствиям, включая возможность создания бесконечной инфляции биткоинов. BIP42 исправил эту проблему, обязав устанавливать вознаграждение блока в ноль после 64 хэлвингов, что позволило избежать использования операции сдвига вправо в контексте неопределенного поведения. Эта модификация, представлявшая собой софт-форк, таким образом, прояснила поведение кода Bitcoin Core. Хотя эта ошибка, исправленная BIP42, была довольно серьезной, она не была сразу критичной, так как проявилась бы только в 2214 году. Опубликованный 1 апреля 2014 года Питером Вуйлем, BIP42 отличается юмористическим тоном.