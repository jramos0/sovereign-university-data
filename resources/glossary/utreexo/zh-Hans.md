---
term: UTREEXO

---
Utreexo 协议由 Tadge Dryja 设计，使用基于梅克尔树的累加器压缩比特币节点的UTXO集。与需要大量存储空间的经典UTXO集不同，Utreexo只存储梅克尔树的根，从而大大减少了所需内存。这样，节点就能验证事务输入中使用的UTXO是否存在，而无需保存完整的UTXO集。通过使用 Utreexo，每个节点只保留一个称为 Merkle 树根的加密指纹。在进行交易时，用户提供UTXO 的所有权证明和相应的梅克尔路径。因此，节点无需存储整个 UTXO 集就能验证交易。让我们以图为例，来了解这一机制：

![](../../dictionnaire/assets/15.webp)

在这个例子中，为了便于理解，我有意将UTXO集减少到4个UTXO。实际上，在撰写这几行文字时，比特币上有近 1.4 亿个 UTXO，这一点很重要。在本图中，Utreexo 节点只需要将 Merkle Root 保存在 RAM 中。如果它收到一笔花费 3 号UTXO（黑色）的交易，证明将由以下要素组成：


- UTXO 3；
- HASH 4；
- HASH 1-2.

Utreexo 节点根据交易发送方发送的信息进行以下验证：


- 它计算出UTXO 3 的印记，从而得到 HASH 3；
- 它将 HASH 3 与 HASH 4 连接起来；
- 它会计算它们的印记，从而得到 HASH 3-4；
- 它将 HASH 3-4 与 HASH 1-2 连接起来；
- 它计算出它们的印记，从而得到梅克尔根。

如果通过该过程获得的 Merkle 根与存储在 RAM 中的 Merkle 根相同，那么它就确信 3 号UTXO 确实是UTXO 集的一部分。

这种方法降低了全节点运算符对 RAM 的要求。然而，Utreexo 也有其局限性，包括由于额外的证明而导致区块大小增加，以及 Utreexo 节点可能依赖桥节点来获取缺失的证明。桥节点是传统的全节点，为 Utreexo 节点提供必要的证明，从而实现全面验证。这种方法在效率和去中心化之间实现了折中，使资源有限的用户更容易获得交易验证。