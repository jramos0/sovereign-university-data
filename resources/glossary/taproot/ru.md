---
term: TAPROOT

---
Крупное обновление протокола биткоина, принятое в результате софтфорка в ноябре 2021 года. Это обновление приносит значительные улучшения в плане конфиденциальности, эффективности и гибкости благодаря реализации BIP340, BIP341 и BIP342. Обновление было заблокировано на блоке 687 284 12 июня 2021 года, когда 90 % блоков, сгенерированных за определенный период, подали сигнал "за", что означало готовность майнеров к активации обновления (*Speedy Trial*). В итоге активация произошла на блоке 709 632 14 ноября 2021 года, спустя почти четыре года после первых обсуждений этого вопроса между Питером Вуйлем, Эндрю Поелстра и Грегори Максвеллом. Это была первая попытка крупного обновления с момента спорной активации SegWit в 2017 году.

Taproot - это также название BIP341, реализованного в рамках одноименного софтфорка, который представляет новую модель скриптов под названием P2TR. Скрипт P2TR блокирует биткоины на уникальном открытом ключе Шнорра, обозначаемом как $K$. Однако этот ключ $K$ на самом деле является совокупностью открытого ключа $P$ и открытого ключа $M$, причем последний вычисляется из корня Меркле списка `scriptPubKey`. Биткоины, заблокированные с помощью P2TR-скрипта, можно потратить двумя разными способами: либо опубликовав подпись под открытым ключом $P$, либо выполнив один из скриптов, содержащихся в дереве Меркла. Первый вариант называется "*ключевой путь*", а второй - "*скриптовый путь*".