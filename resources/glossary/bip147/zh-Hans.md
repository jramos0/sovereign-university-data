---
term: BIP147

---
包含在 SegWit 软分叉中的建议，旨在解决与 `OP_CHECKMULTISIG` 和 `OP_CHECKMULTISIGVERIFY` 操作所消耗的虚元素有关的可篡改性向量。由于一个历史性的偏移错误（单位移位错误），这两个操作码在其基本功能之外从堆栈中删除了一个额外的元素。因此，为避免错误，必须在 `scriptSig` 开头加入一个虚拟值，以满足删除要求并绕过错误。这个值是不必要的，但必须有它脚本才有效。引入 P2MS 标准的 BIP11 建议将 `OP_0` 作为不必要的值。然而，这一标准并没有在共识规则层面执行，这意味着任何值都可以放在这里，而不会导致交易无效。这就是`OP_CHECKMULTISIG`和`OP_CHECKMULTISIGVERIFY`包含可篡改性向量的原因。BIP147 引入了一条新的共识规则，名为 `NULLDUMMY`，要求该虚拟元素必须是空字节数组 (`OP_0`)。任何其他值都会导致脚本评估立即失败。这一变更适用于前 SegWit 脚本和 P2WSH 脚本，并需要软分叉。