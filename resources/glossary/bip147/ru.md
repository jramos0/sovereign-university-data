---
term: BIP147

---
Предложение, включенное в софт-форк SegWit, направленное на решение вектора неполноценности, связанного с фиктивным элементом, потребляемым операциями `OP_CHECKMULTISIG` и `OP_CHECKMULTISIGVERIFY`. Из-за исторической ошибки смещения на единицу (ошибка сдвига на единицу) эти два опкода удаляют дополнительный элемент из стека помимо своей основной функции. Чтобы избежать ошибки, необходимо включить фиктивное значение в начало `scriptSig`, чтобы выполнить удаление и обойти ошибку. Это значение не нужно, но оно должно присутствовать, чтобы скрипт был валидным. BIP11, в котором был представлен стандарт P2MS, рекомендовал помещать `OP_0` в качестве ненужного значения. Однако этот стандарт не соблюдался на уровне правил консенсуса, а значит, туда можно было поместить любое значение, не аннулируя транзакцию. Таким образом, `OP_CHECKMULTISIG` и `OP_CHECKMULTISIGVERIFY` содержали вектор нестабильности. BIP147 вводит новое правило консенсуса, названное `NULLDUMMY`, требующее, чтобы этот фиктивный элемент был пустым байтовым массивом (`OP_0`). Любое другое значение приводит к немедленному провалу оценки сценария. Это изменение относится как к скриптам до СегВита, так и к скриптам P2WSH, и потребовало софтфорка.