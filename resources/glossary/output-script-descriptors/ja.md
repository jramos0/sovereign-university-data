---
term: 出力スクリプト記述子

---
出力スクリプト記述子（または単に記述子）は、出力スクリプト（`scriptPubKey`）を完全に記述する構造化された式であり、特定のスクリプトへの、または特定のスクリプトからのトランザクションを追跡するために必要なすべての情報を提供します。これらの記述子は、使用されるアドレスの構造とタイプを標準的に記述することで、HDウォレットにおける鍵の管理を容易にします。

記述子の主な興味は、ウォレットを復元するために必要不可欠なすべての情報を（復元フレーズに加えて）単一の文字列にカプセル化する能力にあります。対応するニーモニックフレーズとともに記述子を保存することで、秘密鍵だけでなく、ウォレットの正確な構造や関連するスクリプトパラメータも復元することができる。実際、ウォレットを復元するには、初期シードの知識だけでなく、子キーペアを導出するための 特定のインデックスや、マルチシグウォレットの場合は各要素の`xpub`も必要となる。以前は、この情報は暗黙のうちに誰もが知っていると思われていた。しかし、スクリプトが多様化し、より複雑なコンフィギュレーションが出現すると、 この情報を外挿することが困難になり、その結果、これらのデータはプライベートで強 制することが困難な情報となる可能性がある。リカバリフレーズと対応する記述子を知っているだけで、すべてを確実かつ安全にリストアできる。

記述子はいくつかの要素から構成される：


- pk` (Pay-to-PubKey)、`pkh` (Pay-to-PubKey-Hash)、`wpkh` (Pay-to-Witness-PubKey-Hash)、`sh` (Pay-to-Script-Hash)、`wsh` (Pay-to-Witness-Script-Hash)、`tr` (Pay-to-Taproot)、`multi` (マルチシグネチャ)、`sortedmulti` (キーをソートしたマルチシグネチャ) などのスクリプト関数があります；
- 派生パス、例えば`[d34db33f/44h/0h/0h]`は、派生パスと特定のマスター鍵フィンガープリントを示す；
- 16進数の公開鍵や拡張公開鍵（`xpub`）など、さまざまな形式の鍵；
- 記述子の完全性を検証するための、ハッシュで始まるチェックサム。

例えば、P2WPKHウォレットの記述子は次のようになる：

```text
wpkh([cdeab12f/84h/0h/0h]xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17
C1TjvMt7DJ9Qve4dRxm91CDv6cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U/<0;1>/*)#jy0l7n
r4
```

この記述子では、導出関数`wpkh`はPay-to-Witness-Public-Key-Hashスクリプトタイプを示す。その後に派生パスが続く：


- cdeab12f`: マスターキーのフィンガープリント；
- 84h`: SegWit v0アドレス用のBIP84の使用を意味する；
- 0h`：メインネット上のBTC通貨であることを示す；
- 0h`: ウォレットで使われている特定の口座番号を指す。

記述子は、このウォレットで使用される拡張公開鍵も含む：

```text
xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17C1TjvMt7DJ9Qve4dRxm91CDv6
cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U
```

次に、`/<0;1>/*`という表記は、ディスクリプタが外部チェーン(`0`)と内部チェーン(`1`)からアドレスを生成できることを指定し、ワイルドカード(`*`)は、従来のウォレットソフトウェアの「ギャップリミット」を管理するのと同様に、設定可能な方法で複数のアドレスを連続して派生させることを可能にする。

最後に、`#jy0l7nr4`は、記述子の完全性を検証するためのチェックサムを表す。