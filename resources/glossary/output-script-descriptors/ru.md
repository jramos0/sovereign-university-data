---
term: ДЕСКРИПТОРЫ СЦЕНАРИЯ ВЫВОДА

---
Дескрипторы скриптов вывода, или просто дескрипторы, - это структурированные выражения, которые полностью описывают скрипт вывода (`scriptPubKey) и предоставляют всю необходимую информацию для отслеживания транзакций к конкретному скрипту или от него. Эти дескрипторы облегчают управление ключами в кошельках HD благодаря стандартному описанию структуры и типов используемых адресов.

Основной интерес дескрипторов заключается в их способности заключать всю необходимую для восстановления кошелька информацию в одной строке (помимо фразы восстановления). Сохранив дескриптор с соответствующими мнемоническими фразами, можно восстановить не только закрытые ключи, но и точную структуру кошелька и связанные с ним параметры сценария. Действительно, восстановление кошелька требует не только знания начального семени, но и специфических индексов для выведения дочерних пар ключей, а также `xpub` каждого фактора в случае мультисигмального кошелька. Ранее предполагалось, что эта информация неявно известна всем. Однако с диверсификацией криптовалют и появлением более сложных конфигураций эту информацию становилось сложно экстраполировать, что превращало эти данные в приватную и труднодоступную для взлома информацию. Использование дескрипторов значительно упрощает процесс: достаточно знать фразу(ы) восстановления и соответствующий дескриптор, чтобы восстановить все надежно и безопасно.

Дескриптор состоит из нескольких элементов:


- Функции сценариев, такие как `pk` (Pay-to-PubKey), `pkh` (Pay-to-PubKey-Hash), `wpkh` (Pay-to-Witness-PubKey-Hash), `sh` (Pay-to-Script-Hash), `wsh` (Pay-to-Witness-Script-Hash), `tr` (Pay-to-Taproot), `multi` (Multisignature) и`sortedmulti` (Multisignature с отсортированными ключами);
- Пути производных, например, `[d34db33f/44h/0h/0h]`, указывающие на путь производных и конкретный отпечаток мастер-ключа;
- Ключи в различных форматах, таких как шестнадцатеричные открытые ключи или расширенные открытые ключи (`xpub`);
- Контрольная сумма, которой предшествует хэш, для проверки целостности дескриптора.

Например, дескриптор для кошелька P2WPKH может выглядеть так:

```text
wpkh([cdeab12f/84h/0h/0h]xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17
C1TjvMt7DJ9Qve4dRxm91CDv6cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U/<0;1>/*)#jy0l7n
r4
```

В этом дескрипторе функция деривации `wpkh` указывает на тип сценария Pay-to-Witness-Public-Key-Hash. За ней следует путь деривации, который содержит:


- `cdeab12f`: отпечаток мастер-ключа;
- `84h`: означает использование назначения BIP84, предназначенного для адресов SegWit v0;
- `0h`: что указывает на то, что это валюта BTC в мейннете;
- `0h`: обозначает номер конкретного счета, используемого в кошельке.

Дескриптор также включает расширенный открытый ключ, используемый в этом кошельке:

```text
xpub6CUGRUonZSQ4TWtTMmzXdrXDtyPWKiKbERr4d5qkSmh5h17C1TjvMt7DJ9Qve4dRxm91CDv6
cNfKsq2mK1rMsJKhtRUPZz7MQtp3y6atC1U
```

Далее, обозначение `/<0;1>/*` указывает, что дескриптор может генерировать адреса из внешней (`0`) и внутренней (`1`) цепочки, при этом подстановочный знак (`*`) позволяет последовательно генерировать несколько адресов настраиваемым образом, подобно управлению "лимитом пробелов" в традиционном программном обеспечении кошелька.

Наконец, `#jy0l7nr4` представляет собой контрольную сумму для проверки целостности дескриптора.