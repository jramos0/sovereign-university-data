---
term: P2TR

---
P2TR 是 *Pay to Taproot* 的缩写，是一个标准脚本模型，用于在 UTXO（未支出交易输出）上建立支出条件。它是在 2021 年 11 月实施 Taproot 时引入的。P2TR 利用 Schnorr 协议来聚合加密密钥，并利用 Merkle 树来聚合替代脚本，即 MAST（*Merkelized Alternative Script Tree*）。与支出条件公开暴露（有时在收款时，有时在支出时）的传统交易不同，P2TR 允许将复杂的脚本隐藏在单个明显的公钥后面。

从技术上讲，P2TR 脚本将比特币锁定在一个唯一的 Schnorr 公钥上，表示为 $K$。然而，这个 $K$ 密钥实际上是一个公钥 $P$ 和一个公钥 $M$ 的集合，后者是由`scriptPubKey`列表的梅克尔根计算得出的。用 P2TR 脚本锁定的比特币可以通过两种不同的方式使用：一种是发布公钥 $P$ 的签名，另一种是满足默克尔树中包含的脚本之一。第一种方式称为 "*密钥路径*"，第二种称为 "*脚本路径*"。

因此，P2TR 允许用户将比特币发送到一个公钥或自己选择的多个脚本。该脚本的另一个优点是，虽然 P2TR 输出有多种支出方式，但只有使用的一种方式需要在支出时披露，从而使未使用的替代方式保持私有。P2TR 是版本 1 的 SegWit 输出，这意味着 P2TR 输入的签名存储在交易见证中，而不是`scriptSig`中。P2TR 地址使用 `Bech32m` 编码，以 `bc1p` 开头。