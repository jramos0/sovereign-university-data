---
term: P2TR

---
P2TR расшифровывается как *Pay to Taproot*, это стандартная модель сценария, используемая для установления условий расходования средств на UTXO (Unspent Transaction Output). Она была введена с внедрением Taproot в ноябре 2021 года. P2TR использует протокол Шнорра для объединения криптографических ключей, а также деревья Меркле для альтернативных скриптов, известные как MAST (*Merkelized Alternative Script Tree*). В отличие от традиционных транзакций, где условия расходования средств открыты (иногда в момент получения, иногда в момент расходования), P2TR позволяет скрывать сложные сценарии за одним видимым открытым ключом.

Технически скрипт P2TR блокирует биткоины на уникальном открытом ключе Шнорра, обозначаемом как $K$. Однако на самом деле этот ключ $K$ является совокупностью открытого ключа $P$ и открытого ключа $M$, причем последний вычисляется из корня Меркле списка `scriptPubKey`. Биткоины, заблокированные с помощью скрипта P2TR, можно потратить двумя разными способами: либо опубликовав подпись под открытым ключом $P$, либо выполнив один из скриптов, содержащихся в дереве Меркла. Первый вариант называется "*ключевой путь*", а второй - "*скриптовый путь*".

Таким образом, P2TR позволяет пользователям отправлять биткоины либо на открытый ключ, либо на несколько криптовалют по своему выбору. Еще одно преимущество этой криптовалюты заключается в том, что, хотя существует несколько способов потратить P2TR, в момент траты нужно раскрыть только тот, который используется, что позволяет неиспользованным альтернативам оставаться приватными. P2TR - это вывод SegWit версии 1, что означает, что подписи для вводов P2TR хранятся в свидетелях транзакции, а не в `scriptSig`. Адреса P2TR используют кодировку `Bech32m` и начинаются с `bc1p`.